{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const limit = 15;\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst API_KEY = '42577759-46afea0faf18c5517840853c6';\n\nexport async function getImg(page, inputValue) {\n  const { data } = await axios.get('', {\n    params: {\n      page: page,\n      per_page: limit,\n      key: API_KEY,\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return data;\n}\n","export function renderGalleryMarkup(hits, galleryList) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                    <a href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\"\n                            src=\"${webformatURL}\" \n                            alt=\"${tags}\" />\n                    </a>\n                    <ul class=\"image-info\">\n                        <li class=\"image-info-item\">Likes<p class=\"info\">${likes}</p></li>\n                        <li class=\"image-info-item\">Views<p class=\"info\">${views}</p></li>\n                        <li class=\"image-info-item\">Comments<p class=\"info\">${comments}</p></li>\n                        <li class=\"image-info-item\">Downloads<p class=\"info\">${downloads}</p></li>\n                    </ul>\n                </li>`;\n      }\n    )\n    .join('');\n\n  galleryList.insertAdjacentElement('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImg, limit } from './js/pixabay-api';\n\nimport { renderGalleryMarkup } from './js/render-functions';\n\nconst galleryList = document.querySelector('.gallery-list');\nconst formSearch = document.querySelector('form');\nconst input = document.querySelector('input');\nconst loadingBefore = document.querySelector('.form-container div');\nconst loadingAfter = document.querySelector('.loading');\nconst loadMoreImgBtn = document.querySelector('.load-more-markup');\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet curentPage;\nlet curentQuery;\n\nloadMoreImgBtn.classList.add('hidden');\n\nformSearch.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n\n  curentPage = 1;\n  curentQuery = input.value.trim();\n  galleryList.innerHTML = '';\n\n  if (curentQuery === '') {\n    showErrorMessege('Sorry, input is emty!', '#FFA000');\n    return;\n  }\n  loadingBefore.classList.add('loader');\n  try {\n    const data = await getImg(curentPage, curentQuery);\n    if (data.total === 0) {\n      showErrorMessege(\n        'Sorry, there are no images matching your search query. Please try again!',\n        '#EF4040'\n      );\n      formSearch.reset();\n      return;\n    }\n    console.log(data.hits);\n    renderGalleryMarkup(data.hits, galleryList);\n    lightbox.refresh();\n    console.log(data.hits);\n  } catch (error) {\n    showErrorMessege('Error', '#EF4040');\n  }\n  formSearch.reset();\n}\n\nloadMoreImgBtn.addEventListener('click', onClickLoadMoreBtn);\n\nasync function onClickLoadMoreBtn(event) {\n  curentPage++;\n  try {\n    const data = getImg(curentPage, curentQuery);\n    renderGalleryMarkup(data.hits, galleryList);\n    window.scrollBy({\n      top: 575.6666870117188,\n      behavior: 'smooth',\n    });\n    if (data.hits.length < limit) {\n      loadMoreImgBtn.classList.add('hidden');\n      return showErrorMessege(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n    lightbox.refresh();\n  } catch (error) {\n    showErrorMessege('Error');\n  }\n}\n\nfunction showErrorMessege(message, backgroundColor) {\n  iziToast.info({\n    position: 'topRight',\n    message: message,\n    messageColor: '#ffffff',\n    backgroundColor: backgroundColor,\n    messageSize: 16,\n    layout: 2,\n    maxWidth: 380,\n  });\n}\n"],"names":["limit","axios","API_KEY","getImg","page","inputValue","data","renderGalleryMarkup","hits","galleryList","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","input","loadingBefore","loadMoreImgBtn","lightbox","SimpleLightbox","curentPage","curentQuery","onSubmitForm","event","showErrorMessege","onClickLoadMoreBtn","message","backgroundColor","iziToast"],"mappings":"owBAEO,MAAMA,EAAQ,GACrBC,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAU,qCAET,eAAeC,EAAOC,EAAMC,EAAY,CAC7C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAML,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,KAAMG,EACN,SAAUJ,EACV,IAAKE,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,EACD,OAAOC,CACT,CCnBO,SAASC,EAAoBC,EAAMC,EAAa,CACrD,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,+BACgBL,CAAa;AAAA;AAAA,mCAETD,CAAY;AAAA,mCACZE,CAAI;AAAA;AAAA;AAAA,2EAGoCC,CAAK;AAAA,2EACLC,CAAK;AAAA,8EACFC,CAAQ;AAAA,+EACPC,CAAS;AAAA;AAAA,sBAInF,EACA,KAAK,EAAE,EAEVR,EAAY,sBAAsB,YAAaC,CAAM,CACvD,CCpBA,MAAMD,EAAc,SAAS,cAAc,eAAe,EACpDS,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAgB,SAAS,cAAc,qBAAqB,EAC7C,SAAS,cAAc,UAAU,EACtD,MAAMC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAW,IAAIC,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EACAC,EAEJJ,EAAe,UAAU,IAAI,QAAQ,EAErCH,EAAW,iBAAiB,SAAUQ,CAAY,EAElD,eAAeA,EAAaC,EAAO,CAOjC,GANAA,EAAM,eAAc,EAEpBH,EAAa,EACbC,EAAcN,EAAM,MAAM,OAC1BV,EAAY,UAAY,GAEpBgB,IAAgB,GAAI,CACtBG,EAAiB,wBAAyB,SAAS,EACnD,MACD,CACDR,EAAc,UAAU,IAAI,QAAQ,EACpC,GAAI,CACF,MAAMd,EAAO,MAAMH,EAAOqB,EAAYC,CAAW,EACjD,GAAInB,EAAK,QAAU,EAAG,CACpBsB,EACE,2EACA,SACR,EACMV,EAAW,MAAK,EAChB,MACD,CACD,QAAQ,IAAIZ,EAAK,IAAI,EACrBC,EAAoBD,EAAK,KAAMG,CAAW,EAC1Ca,EAAS,QAAO,EAChB,QAAQ,IAAIhB,EAAK,IAAI,CACtB,MAAe,CACdsB,EAAiB,QAAS,SAAS,CACpC,CACDV,EAAW,MAAK,CAClB,CAEAG,EAAe,iBAAiB,QAASQ,CAAkB,EAE3D,eAAeA,EAAmBF,EAAO,CACvCH,IACA,GAAI,CACF,MAAMlB,EAAOH,EAAOqB,EAAYC,CAAW,EAM3C,GALAlB,EAAoBD,EAAK,KAAMG,CAAW,EAC1C,OAAO,SAAS,CACd,IAAK,kBACL,SAAU,QAChB,CAAK,EACGH,EAAK,KAAK,OAASN,EACrB,OAAAqB,EAAe,UAAU,IAAI,QAAQ,EAC9BO,EACL,4DACR,EAEIN,EAAS,QAAO,CACjB,MAAe,CACdM,EAAiB,OAAO,CACzB,CACH,CAEA,SAASA,EAAiBE,EAASC,EAAiB,CAClDC,EAAS,KAAK,CACZ,SAAU,WACV,QAASF,EACT,aAAc,UACd,gBAAiBC,EACjB,YAAa,GACb,OAAQ,EACR,SAAU,GACd,CAAG,CACH"}